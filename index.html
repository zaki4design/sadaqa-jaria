<script>
function readQuran() {
    const name = document.getElementById("name").value.trim();
    if (!name) {
        alert("من فضلك اكتب اسم المتوفّى");
        return;
    }

    document.getElementById("content").style.display = "block";
    document.getElementById("dua").innerHTML =
        `اللهم اغفر لـ <strong>${name}</strong>، وارحمه، وعافه، واعفُ عنه،
        وأكرم نزله، ووسّع مدخله، واغسله بالماء والثلج والبرد،
        ونقِّه من الخطايا كما نقيت الثوب الأبيض من الدنس،
        وأدخله الجنة، وأعذه من عذاب القبر وعذاب النار.`;
}

// مشاركة برابط فيه الاسم
function shareWithName() {
    const name = document.getElementById("name").value.trim();
    if (!name) {
        alert("اكتب اسم المتوفّى الأول");
        return;
    }

    const url =
        window.location.origin +
        window.location.pathname +
        "?name=" +
        encodeURIComponent(name);

    if (navigator.share) {
        navigator.share({
            title: "صدقة جارية",
            text: `اقرأ الفاتحة على روح ${name}`,
            url: url
        });
    } else {
        navigator.clipboard.writeText(url);
        alert("تم نسخ رابط الصدقة الجارية");
    }
}

// تحميل الاسم تلقائيًا من الرابط
window.onload = function () {
    const params = new URLSearchParams(window.location.search);
    const nameFromUrl = params.get("name");

    if (nameFromUrl) {
        document.getElementById("name").value = nameFromUrl;
        readQuran();
    }
};
</script>
